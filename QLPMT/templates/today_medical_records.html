{% extends 'layout/base.html' %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center text-primary">üìã Danh s√°ch phi·∫øu kh√°m b·ªánh ng√†y {{ selected_date }}</h2>

    {% if medical_records %}
    <table class="table table-bordered table-hover text-center align-middle">
        <thead class="table-dark">
            <tr>
                <th>#</th>
                <th>B·ªánh Nh√¢n</th>
                <th>B√°c Sƒ©</th>
                <th>Ng√†y Kh√°m</th>
                <th>Tri·ªáu Ch·ª©ng</th>
                <th>D·ª± ƒêo√°n B·ªánh</th>
                <th>Ti·ªÅn Kh√°m</th>
                <th>T·ªïng Ti·ªÅn (VND)</th>
                <th>Tr·∫°ng Th√°i</th>
            </tr>
        </thead>
        <tbody>
        {% for record in medical_records %}
        <tr>
            <td>{{ loop.index }}</td>
            <td>{{ record.patient_name }}</td>
            <td>{{ record.doctor_name }}</td>
            <td>{{ record.appointment_date.strftime('%d-%m-%Y') }}</td> <!-- ƒê·ªãnh d·∫°ng ng√†y DD-MM-YYYY -->
            <td>{{ record.symptoms }}</td>
            <td>{{ record.diagnosis }}</td>
            <td class="fw-bold text-danger">{{ "{:,.0f}".format(record.medical_fee) }} VND</td> <!-- ƒê·ªãnh d·∫°ng ti·ªÅn -->
            <td class="fw-bold text-danger">{{ "{:,.0f}".format(record.total_medicine_cost) }} VND</td> <!-- ƒê·ªãnh d·∫°ng ti·ªÅn -->
            <td>
                {% if record.paid|int == 1 %}
                    <span class="badge bg-success">‚úÖ ƒê√£ thanh to√°n</span>
                {% else %}
                    <span class="badge bg-warning text-dark">‚è≥ Ch∆∞a thanh to√°n</span>
                {% endif %}
            </td>
            <td>
                <td>
                    <button class="btn btn-success btn-sm" onclick="storePaymentInfo('{{ record.id }}', '{{ record.patient_name }}', '{{ record.appointment_date }}', '{{ record.total_medicine_cost }}', '{{ record.medical_fee }}')">
                        üí≥ Thanh To√°n
                    </button>
                </td>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-warning text-center">
        <strong>‚ö† Kh√¥ng c√≥ phi·∫øu kh√°m b·ªánh n√†o h√¥m nay.</strong>
    </div>
    {% endif %}
</div>
{% endblock %}